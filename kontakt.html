<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kontakt | Marcel Richter</title>
    <meta
      name="description"
      content="Kontaktseite von Marcel Richter. Schreib mir per E-Mail oder nutze das Kontaktformular."
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <button id="darkModeToggle" aria-label="Dark Mode umschalten">
      ğŸŒ— Dark Mode
    </button>

    <main class="kontaktseite">
      <h1>ğŸ“« Kontakt aufnehmen</h1>

      <p>
        Schreib mir gern eine Nachricht an
        <a href="mailto:marcel.richter.fn@gmx.de">marcel.richter.fn@gmx.de</a>
        oder nutze das Kontaktformular. Ich freue mich auf deine Nachricht.
      </p>

      <div class="kontakt-links">
        <a
          class="link-btn"
          href="https://www.linkedin.com/in/marcel-ric/"
          target="_blank"
          rel="noopener"
          >ğŸ’¼ LinkedIn</a
        >
        <a class="link-btn" href="index.html">ğŸ  Startseite</a>
      </div>

      <form
        id="kontaktForm"
        class="kontakt-formular"
        action="https://formsubmit.co/marcel.richter.fn%40gmx.de"
        method="POST"
        novalidate
      >
        <!-- Formsubmit Optionen -->
        <input type="hidden" name="_captcha" value="false" />
        <input
          type="hidden"
          name="_subject"
          value="Neue Nachricht von der Website"
        />
        <input type="hidden" name="_template" value="table" />

        <!-- Optional. Wenn du lieber ohne JS umleiten willst, aktivieren und das JS Redirect entfernen -->
        <input type="hidden" name="_next" value="danke.html" />

        <!-- Honeypot gegen Spam -->
        <div style="display: none;">
          <label for="website">Website</label>
          <input type="text" id="website" name="_honey" tabindex="-1" autocomplete="off" />
        </div>

        <label for="name">Name</label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Dein Name"
          required
          autocomplete="name"
        />

        <label for="email">E-Mail</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Deine E-Mail"
          required
          autocomplete="email"
        />

        <label for="nachricht">Nachricht</label>
        <textarea
          id="nachricht"
          name="nachricht"
          rows="6"
          placeholder="Deine Nachricht"
          required
        ></textarea>

        <button type="submit" id="submitBtn">ğŸ“¨ Nachricht senden</button>

        <div
          id="errorMessage"
          class="error-message"
          style="display: none; color: red; margin-top: 10px;"
          role="alert"
          aria-live="polite"
        ></div>

        <div
          id="successMessage"
          class="success-message"
          style="display: none; margin-top: 10px;"
          aria-live="polite"
        >
          âœ… Nachricht wurde gesendet. Weiterleitung lÃ¤uft.
        </div>
      </form>

      <div class="zurueck-link">
        <a href="index.html">ğŸ”™ ZurÃ¼ck zur Startseite</a>
      </div>
    </main>

    <script src="script.js"></script>

    <script>
      document.getElementById("kontaktForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const form = e.target;
        const submitBtn = document.getElementById("submitBtn");
        const errorMessage = document.getElementById("errorMessage");
        const successMessage = document.getElementById("successMessage");

        errorMessage.style.display = "none";
        errorMessage.textContent = "";
        successMessage.style.display = "none";

        if (!form.checkValidity()) {
          errorMessage.textContent = "Bitte prÃ¼fe deine Eingaben und fÃ¼lle alle Pflichtfelder aus.";
          errorMessage.style.display = "block";
          return;
        }

        submitBtn.disabled = true;
        submitBtn.textContent = "â³ Wird gesendet...";

        try {
          const response = await fetch(form.action, {
            method: "POST",
            headers: { Accept: "application/json" },
            body: new FormData(form),
          });

          if (response.ok) {
            successMessage.style.display = "block";
            window.location.href = "danke.html";
            return;
          }

          throw new Error("Server error: " + response.status);
        } catch (error) {
          errorMessage.textContent =
            "âŒ Fehler beim Senden. Bitte versuche es spÃ¤ter erneut oder schreibe mir direkt per E-Mail.";
          errorMessage.style.display = "block";

          submitBtn.disabled = false;
          submitBtn.textContent = "ğŸ“¨ Nachricht senden";
        }
      });
    </script>
  </body>
</html>
