<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kontakt | Marcel Richter</title>
  <meta name="description" content="Kontaktiere Marcel Richter. Schreib mir eine Nachricht oder nutze das Kontaktformular.">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navigation Header -->
  <header class="site-header">
    <nav class="nav-container">
      <a href="index.html" class="nav-logo">Marcel Richter</a>

      <!-- Hamburger Menu Button (Mobile) -->
      <button id="hamburger" class="hamburger" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <!-- Desktop Navigation -->
      <ul class="nav-links">
        <li><a href="index.html" data-i18n="navHome">Start</a></li>
        <li><a href="index.html#projects" data-i18n="navProjects">Projekte</a></li>
        <li><a href="cv.html" data-i18n="navCV">Lebenslauf</a></li>
        <li><a href="kontakt.html" data-i18n="navContact">Kontakt</a></li>
        <li><a href="https://www.linkedin.com/in/marcel-ric/" target="_blank" rel="noopener" data-i18n="navLinkedIn">LinkedIn</a></li>
      </ul>

      <!-- Desktop Controls -->
      <div class="nav-controls">
        <button id="darkModeToggle" class="toggle-btn" aria-label="Dark Mode umschalten">Dark Mode</button>
        <button id="languageToggle" class="toggle-btn" aria-label="Sprache wechseln">English</button>
      </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobileOverlay" class="mobile-overlay"></div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu">
      <ul class="mobile-menu-links">
        <li><a href="index.html" data-i18n="navHome">Start</a></li>
        <li><a href="index.html#projects" data-i18n="navProjects">Projekte</a></li>
        <li><a href="cv.html" data-i18n="navCV">Lebenslauf</a></li>
        <li><a href="kontakt.html" data-i18n="navContact">Kontakt</a></li>
        <li><a href="https://www.linkedin.com/in/marcel-ric/" target="_blank" rel="noopener" data-i18n="navLinkedIn">LinkedIn</a></li>
      </ul>

      <div class="mobile-controls">
        <button id="mobileDarkToggle" class="toggle-btn" aria-label="Dark Mode umschalten">Dark Mode</button>
        <button id="mobileLangToggle" class="toggle-btn" aria-label="Sprache wechseln">English</button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="content">
    <div class="form-wrapper">
      <h1 data-i18n="contactTitle">Kontakt aufnehmen</h1>

      <p class="form-intro" data-i18n="contactIntro">
        Schreib mir gern eine Nachricht oder nutze das Kontaktformular. Ich freue mich auf deine Nachricht.
      </p>

      <p style="text-align: center; margin-bottom: 1.5rem;">
        <span data-i18n="contactEmail">E-Mail:</span>
        <a href="mailto:marcel.richter.fn@gmx.de">marcel.richter.fn@gmx.de</a>
      </p>

      <form
        id="kontaktForm"
        class="contact-form"
        action="https://formsubmit.co/marcel.richter.fn@gmx.de"
        method="POST"
        novalidate
      >
        <!-- FormSubmit Konfiguration -->
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_subject" value="Neue Nachricht von der Portfolio Website">
        <input type="hidden" name="_template" value="table">
        <input type="hidden" name="_next" value="danke.html">

        <!-- Honeypot gegen Spam -->
        <div style="position: absolute; left: -5000px;" aria-hidden="true">
          <label for="website">Website</label>
          <input type="text" id="website" name="_honey" tabindex="-1" autocomplete="off">
        </div>

        <!-- Name -->
        <div>
          <label for="name" data-i18n="contactName">Name</label>
          <input
            type="text"
            id="name"
            name="name"
            data-i18n-placeholder="contactNamePlaceholder"
            placeholder="Dein Name"
            required
            autocomplete="name"
          >
        </div>

        <!-- E-Mail -->
        <div>
          <label for="email" data-i18n="contactEmail">E-Mail</label>
          <input
            type="email"
            id="email"
            name="email"
            data-i18n-placeholder="contactEmailPlaceholder"
            placeholder="Deine E-Mail"
            required
            autocomplete="email"
          >
        </div>

        <!-- Nachricht -->
        <div>
          <label for="nachricht" data-i18n="contactMessage">Nachricht</label>
          <textarea
            id="nachricht"
            name="nachricht"
            rows="6"
            data-i18n-placeholder="contactMessagePlaceholder"
            placeholder="Deine Nachricht"
            required
          ></textarea>
        </div>

        <!-- Submit Button -->
        <button type="submit" id="submitBtn" class="btn btn-primary" data-i18n="contactSubmit">
          üì® Nachricht senden
        </button>

        <!-- Error Message -->
        <div
          id="errorMessage"
          class="error-message"
          style="display: none;"
          role="alert"
          aria-live="polite"
        ></div>

        <!-- Success Message -->
        <div
          id="successMessage"
          class="success-message"
          style="display: none;"
          aria-live="polite"
        >
          ‚úÖ Nachricht wurde gesendet. Weiterleitung l√§uft...
        </div>
      </form>

      <div class="form-actions">
        <a href="index.html" class="btn btn-secondary" data-i18n="contactBackHome">üîô Zur√ºck zur Startseite</a>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <ul class="footer-links">
        <li><a href="index.html" data-i18n="navHome">Start</a></li>
        <li><a href="cv.html" data-i18n="navCV">Lebenslauf</a></li>
        <li><a href="kontakt.html" data-i18n="footerContact">Kontakt</a></li>
        <li><a href="https://www.linkedin.com/in/marcel-ric/" target="_blank" rel="noopener" data-i18n="footerLinkedIn">LinkedIn</a></li>
      </ul>
      <div class="footer-legal">
        <a href="impressum.html" data-i18n="footerImpressum">Impressum</a>
        <a href="datenschutz.html" data-i18n="footerDatenschutz">Datenschutz</a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="script.js"></script>

  <!-- Contact Form Handler -->
  <script>
    document.getElementById("kontaktForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const form = e.target;
      const submitBtn = document.getElementById("submitBtn");
      const errorMessage = document.getElementById("errorMessage");
      const successMessage = document.getElementById("successMessage");

      errorMessage.style.display = "none";
      errorMessage.textContent = "";
      successMessage.style.display = "none";

      if (!form.checkValidity()) {
        const lang = typeof getCurrentLanguage === "function" ? getCurrentLanguage() : "de";
        const msg = (typeof translations !== "undefined" && translations[lang])
          ? translations[lang].contactValidation
          : "Bitte pr√ºfe deine Eingaben und f√ºlle alle Pflichtfelder aus.";
        errorMessage.textContent = msg;
        errorMessage.style.display = "block";
        return;
      }

      submitBtn.disabled = true;
      const lang = typeof getCurrentLanguage === "function" ? getCurrentLanguage() : "de";
      const sendingMsg = (typeof translations !== "undefined" && translations[lang])
        ? translations[lang].contactSending
        : "‚è≥ Wird gesendet...";
      submitBtn.textContent = sendingMsg;

      try {
        const response = await fetch(form.action, {
          method: "POST",
          headers: { "Accept": "application/json" },
          body: new FormData(form)
        });

        if (response.ok) {
          successMessage.style.display = "block";
          setTimeout(() => {
            window.location.href = "danke.html";
          }, 900);
          return;
        }

        throw new Error("Server error: " + response.status);
      } catch (error) {
        const lang = typeof getCurrentLanguage === "function" ? getCurrentLanguage() : "de";
        const errorMsg = (typeof translations !== "undefined" && translations[lang])
          ? translations[lang].contactError
          : "‚ùå Fehler beim Senden. Bitte versuche es sp√§ter erneut oder schreibe mir direkt per E-Mail.";
        errorMessage.textContent = errorMsg;
        errorMessage.style.display = "block";

        submitBtn.disabled = false;
        const submitMsg = (typeof translations !== "undefined" && translations[lang])
          ? translations[lang].contactSubmit
          : "üì® Nachricht senden";
        submitBtn.textContent = submitMsg;
      }
    });
  </script>
</body>
</html>
