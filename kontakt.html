<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kontakt â€“ Marcel Richter</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <button id="darkModeToggle">ğŸŒ— Dark Mode</button>

    <main class="kontaktseite">
      <h1>ğŸ“« Kontakt aufnehmen</h1>
      <p>
        Schreib mir gern eine Nachricht an
        <a href="mailto:marcel.richter.fn@gmx.de">marcel.richter.fn@gmx.de</a>
        oder erreiche mich direkt Ã¼ber mein Kontaktformular. Ich freue mich auf
        deine Nachricht!
      </p>

      <form
        id="kontaktForm"
        class="kontakt-formular"
        action="https://formsubmit.co/marcel.richter.fn%40gmx.de"
        method="POST"
      >
        <input type="hidden" name="_captcha" value="false" />
        <input type="hidden" name="_subject" value="Neue Nachricht von der Website" />

        <label for="name">Name</label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Dein Name"
          required
        />

        <label for="email">E-Mail</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Deine E-Mail"
          required
        />

        <label for="nachricht">Nachricht</label>
        <textarea
          id="nachricht"
          name="nachricht"
          rows="6"
          placeholder="Deine Nachricht"
          required
        ></textarea>

        <button type="submit" id="submitBtn">ğŸ“¨ Nachricht senden</button>
        <div id="errorMessage" class="error-message" style="display: none; color: red; margin-top: 10px;"></div>
      </form>

      <div class="zurueck-link">
        <a href="index.html">ğŸ”™ ZurÃ¼ck zur Startseite</a>
      </div>
    </main>

    <script src="script.js"></script>

    <script>
      document.getElementById('kontaktForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const form = e.target;
        const submitBtn = document.getElementById('submitBtn');
        const errorMessage = document.getElementById('errorMessage');

        // Reset error message
        errorMessage.style.display = 'none';
        errorMessage.textContent = '';

        // Disable button during submission
        submitBtn.disabled = true;
        submitBtn.textContent = 'â³ Wird gesendet...';

        try {
          const response = await fetch(form.action, {
            method: 'POST',
            body: new FormData(form),
          });

          if (response.ok) {
            // Redirect to danke.html on success
            window.location.href = 'danke.html';
          } else {
            throw new Error(`Server error: ${response.status}`);
          }
        } catch (error) {
          // Show error message
          errorMessage.textContent = 'âŒ Fehler beim Senden! Bitte versuche es spÃ¤ter erneut oder kontaktiere mich direkt.';
          errorMessage.style.display = 'block';
          console.error('Form submission error:', error);

          // Re-enable button
          submitBtn.disabled = false;
          submitBtn.textContent = 'ğŸ“¨ Nachricht senden';
        }
      });
    </script>
  </body>
</html>
